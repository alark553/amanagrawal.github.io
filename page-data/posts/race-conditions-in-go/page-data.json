{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/race-conditions-in-go","result":{"data":{"markdownRemark":{"id":"b55b5a91-bba4-5990-9b91-1ecfa7c76fce","html":"<p>Goroutines are the methods which run concurrently with other methods of the Go Program. All Goroutines run in the same address space. The execution of the different gorountine depends upon the interleaving among the Goroutines. Interleavings are the execution of order of tasks of different Goroutines, and while writing the code this order is always non deterministic. Hence go routines can execute their corresponding tasks in different manners. Thus can produce different output every time for the same input.</p>\n<p>For example in below program  </p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n \n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n   <span class=\"token string\">\"time\"</span>\n   <span class=\"token string\">\"fmt\"</span>\n<span class=\"token punctuation\">)</span>\n \n<span class=\"token keyword\">func</span> <span class=\"token function\">evenNumbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> i<span class=\"token operator\">:=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span> <span class=\"token punctuation\">{</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span>\n     time<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">150</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">func</span> <span class=\"token function\">oddNumbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> i<span class=\"token operator\">:=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span> <span class=\"token punctuation\">{</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span> i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n     time<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">go</span> <span class=\"token function\">oddNumbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">go</span> <span class=\"token function\">evenNumbers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  time<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Above program when compiled and run results in following output </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">0 // output from function evenNumbers\n1 // output from function oddNumbers\n2 // output from function oddNumbers\n3 // output from function oddNumbers\n4 // output from function evenNumbers\n5 // output from function oddNumbers\n6 // output from function evenNumbers\n8 // output from function evenNumbers\n7 // output from function oddNumbers\n9 // output from function oddNumbers</code></pre></div>\n<p>The above output is independent of order of code written and called, while both thee functions has been executed concurrently, some of the code from function1 has executed, while some of the code from function 2 has been executed. There is no deterministic order for the execution. </p>\n<h2 id=\"the-syntactical-sugar\" style=\"position:relative;\"><a href=\"#the-syntactical-sugar\" aria-label=\"the syntactical sugar permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The-syntactical-sugar</h2>\n<p>Race Condition </p>\n<p>When two Goroutines share the same resources and try to read/write that resource at the same time then there might be non deterministic output for the program and this situation is said to be Race condition. </p>\n<p>In the Below program the <code class=\"language-text\">add</code> and <code class=\"language-text\">mul</code> are two goroutines which are executed together.\nNow both of them try to add and multiply with 2 for the given x. </p>\n<p>Now if we are taking x = 2 in the program, then there might be two conditions for the same,  </p>\n<p>If\nx =( x * 2) + 2 \t\t\t\tfor x =2 , the output would be 6\nx = 2  * (x +2)\t\t\t\tfor x = 2 output would be 8</p>\n<p>The output depends upon the execution order of the both Goroutines. Now in the below case since we have called add first then output should be 8. </p>\n<p>But surprisingly the output returned to be 6 or sometimes 8, which satisfies the race condition. </p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token keyword\">package</span> main\n \n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token string\">\"time\"</span>\n  <span class=\"token string\">\"fmt\"</span>\n<span class=\"token punctuation\">)</span>\n \n<span class=\"token keyword\">var</span> x <span class=\"token builtin\">int</span>\n \n<span class=\"token keyword\">func</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   x <span class=\"token operator\">=</span> x<span class=\"token operator\">+</span><span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">func</span> <span class=\"token function\">mul</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">{</span>\n  x <span class=\"token operator\">=</span> x<span class=\"token operator\">*</span><span class=\"token number\">2</span>\n \n<span class=\"token punctuation\">}</span>\n \n<span class=\"token keyword\">func</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  x <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n  <span class=\"token keyword\">go</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">go</span> <span class=\"token function\">mul</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  time<span class=\"token punctuation\">.</span><span class=\"token function\">Sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span> <span class=\"token operator\">*</span> time<span class=\"token punctuation\">.</span>Millisecond<span class=\"token punctuation\">)</span>\n  fmt<span class=\"token punctuation\">.</span><span class=\"token function\">Println</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","fields":{"slug":"/posts/race-conditions-in-go","tagSlugs":["/tag/golang/","/tag/go-routines/","/tag/web-development/"]},"frontmatter":{"date":"2020-05-10T22:40:32.169Z","description":"When two Goroutines share the same resources and try to read/write that resource at the same time then there might be non deterministic output for the program and this situation is said to be Race condition.  .","tags":["Golang","Go routines","Web Development"],"title":"Race conditions in GO","socialImage":"/media/42-line-bible.jpg"}}},"pageContext":{"slug":"/posts/race-conditions-in-go"}}}